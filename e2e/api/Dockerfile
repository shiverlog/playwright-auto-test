# Description : Dockerfile - ğŸ“Œ e2e api í…ŒìŠ¤íŠ¸
# Author : Shiwoo Min
# Date : 2024-03-10

# Node.js ê¸°ë°˜ Playwright ì»¨í…Œì´ë„ˆ (E2E í…ŒìŠ¤íŠ¸)
FROM mcr.microsoft.com/playwright:v1.51.0-noble

# ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
WORKDIR /app

#strict-ssl=false ì„¤ì •, ì‚¬ë‚´ë§ SSL ìš°íšŒ ì˜µì…˜
ENV NODE_TLS_REJECT_UNAUTHORIZED=0

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
ENV NODE_ENV=test

# ì¢…ì†ì„± ë³µì‚¬ ë° ì„¤ì¹˜
COPY package.json package-lock.json ./
RUN npm install --legacy-peer-deps

# í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬
COPY e2e/pc-web ./e2e/pc-web

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´
CMD ["npx", "playwright", "test", "--config=e2e/pc-web/playwright.config.js"]
