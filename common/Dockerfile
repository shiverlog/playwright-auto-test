# Description : Dockerfile - ğŸ“Œ Common Base Image
# Author : Shiwoo Min
# Date : 2024-03-10

# server imageëŠ” ubunutu 22.04ë¥¼ ì‚¬ìš©
FROM ubuntu:22

# ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
WORKDIR /app

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ì†ì„± ì„¤ì¹˜
COPY package.json package-lock.json /app/
RUN npm install

# ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼ ì¶”ê°€
COPY . /app/

# imageê°€ ì˜¬ë¼ê°”ì„ ë•Œ ìˆ˜í–‰ë˜ëŠ” ëª…ë ¹ì–´ë“¤
# -y ì˜µì…˜ì„ ë„£ì–´ì„œ ë¬´ì¡°ê±´ ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ë„ë¡ í•œë‹¤.
RUN \
    apt-get update && \
    apt-get install -y apache2

# exposeë¥¼ ì´ìš©í•´ apache server 80í¬íŠ¸ë¡œ ì ‘ê·¼
EXPOSE 80

# ì»¨í…Œì´ë„ˆê°€ ìƒì„± ëœ ì´í›„ì— ë‚´ë¶€ì˜ ì•„íŒŒì¹˜ ì„œë²„ëŠ” í•­ìƒ ì‹¤í–‰ì¤‘ì¸ ìƒíƒœë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.
# apachectlì„ foreground(ì¦‰, deamon)ìƒíƒœë¡œ ëŒì•„ê°€ë„ë¡ í•œë‹¤.
CMD ["apachectl", "-D", "FOREGROUND"]
