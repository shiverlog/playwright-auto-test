# Description : cd.yml - 📌 배포 워크플로우
# Author : Shiwoo Min
# Date : 2024-03-10

name: CD - Deploy

on:
  workflow_call:

jobs:
  deploy:
    name: Deploy Application
    runs-on: ubuntu-latest

    steps:
      # 저장소 코드 체크아웃 (보통 배포 스크립트나 설정 파일 확인 용)
      - name: Checkout repository
        uses: actions/checkout@v4

      # Docker Hub 로그인 (비공개 이미지 푸시 or pull을 위해 필요)
      - name: Login to Docker Hub
        uses: docker/login-action@v2
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}

      # 서버에 배포 (여기선 예시로 echo만 실행됨)
      - name: Deploy to Remote Server
        env:
          IMAGE_NAME: my-app # 실제 배포할 이미지 이름 지정
        run: |
          echo "Docker push 완료"
          echo "Deploying image: $IMAGE_NAME"
          # 여기에 실제 배포 스크립트 삽입 가능 (예: SSH 접속 + docker pull + restart 등)
